<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>redrawing: OAK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">redrawing
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Python package provinding tools for artistic interactive applications using AI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__c___users_eltsu__documents__git_hub__re_drawing_docs__documenta_xC3_xA7_xC3_xA3o_redrawing__o_a_k.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OAK </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The "OAK_Stage" is the stage created for working with the OAK camera. It's has methods for create the pipeline and retrive the images from the camera, and other specific uses can be created using substages, specifically stages that inherit from "OAK_Substage" class.</p>
<p>In addition to the common methods of stages, the "OAK_Substage" have specific methods to manipulate the OAK pipeline that can be determined. The pipeline creation sequence, that is executed in the "OAK_Stage" setup is:</p>
<div class="fragment"><div class="line">graph TD</div>
<div class="line"> </div>
<div class="line">parte0[&quot;Substages setup&quot;]</div>
<div class="line">style parte0 fill:#000099</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">attr1{{Substage&lt;br&gt;Needed cameras sizes}}</div>
<div class="line"> </div>
<div class="line">meth1(&quot;Substage&lt;br&gt;createNodes(self, pipeline)&quot;)</div>
<div class="line">meth2(&quot;Substage&lt;br&gt;link(self, nodes, rgb_out, left_out, right_out, depth_out)&quot;)</div>
<div class="line">meth3(&quot;Substage&lt;br&gt;createOutputQueue(self, device)&quot;)</div>
<div class="line">meth4(&quot;Substage&lt;br&gt;createInputQueue(self, device)&quot;)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">subgraph &quot;OAK_Stage.setup()&quot;</div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    parte1[Set previews sizes]</div>
<div class="line">    parte2[Instantiate cameras]</div>
<div class="line">    parte3[&quot;Instantiate other nodes &lt;br&gt;(substages nodes)&quot;]</div>
<div class="line">    parte4[Instantiate depth ]</div>
<div class="line">    parte5[Create required ImageManips]</div>
<div class="line">    parte6[Link]</div>
<div class="line">    parte7[Start device]</div>
<div class="line">    parte8[Queue creation]</div>
<div class="line">    parte9[Calibration read]</div>
<div class="line"> </div>
<div class="line">     parte1 ---&gt; parte2 --&gt; parte3 --&gt; parte4 --&gt; parte5 --&gt; parte6 --&gt; parte7 --&gt; parte8 --&gt; parte9</div>
<div class="line"> </div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">parte0 --&gt; parte1</div>
<div class="line">parte1 --- attr1</div>
<div class="line">parte3 --- meth1</div>
<div class="line">parte6 --- meth2</div>
<div class="line">parte8 --- meth3</div>
<div class="line">parte8 --- meth4</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Substage methods</h1>
<p>The OAK_Substage methods for manipulating the pipeline are:</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Instantiate other nodes: createNodes(self, pipeline) : dict</h2>
<p>Used for creating a customized node. Must return a dict with {"node_name":node}.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Link: link(self, nodes, rgb_out, left_out, right_out, depth_out) : dict</h2>
<p>Used for linking nodes. Receives the complete nodes dict, with also the specific images out objects. This is done because some other substages may need a different image size, and the OAK_Stage automatically creates ImageManip nodes as needed. Other Substage can also modify the behavior of this substage, with this substage been linked to it instead of the OAK_Stage.</p>
<p>In addition to creating internal links, you must also create input and output XLink, and must return a dict with: {"link_name":link} ("link_name" must be the same name as the stream name)</p>
<h2><a class="anchor" id="autotoc_md6"></a>
createOutputQueue(self, device) : dict</h2>
<p>Create output queues needed by this substage. Receives the complete links dict, and must return a dict with {"queue_name":queue}</p>
<h2><a class="anchor" id="autotoc_md7"></a>
createInputQueue(self, device) : dict</h2>
<p>Create input queues needed by this substage. Receives the complete links dict, and must return a dict with {"queue_name":queue}</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Substage atributes</h1>
<p>To use OAK resources, the stage needs to set some attributes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Attribute  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Possible values   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">color_input_size  </td><td class="markdownTableBodyNone">The size needed for the color image  </td><td class="markdownTableBodyNone">[w,h], [0,0] if it doesn't use   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">left_input_size  </td><td class="markdownTableBodyNone">The size needed for the left image  </td><td class="markdownTableBodyNone">[w,h], [0,0] if it doesn't use   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">right_input_size  </td><td class="markdownTableBodyNone">The size needed for the right image  </td><td class="markdownTableBodyNone">[w,h], [0,0] if it doesn't use   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">uses_depth  </td><td class="markdownTableBodyNone">If needs depth output  </td><td class="markdownTableBodyNone">True/False   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md9"></a>
Context and configs</h1>
<p>For changing the behaviour of the OAK_Stage, it also have the following configurations:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Default  </th><th class="markdownTableHeadNone">Possible values   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"frame_id"  </td><td class="markdownTableBodyNone">The frame_id used in the output cameras images  </td><td class="markdownTableBodyNone">"oak"  </td><td class="markdownTableBodyNone">Any string   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"color_resolution"  </td><td class="markdownTableBodyNone">The resolution of the color camera  </td><td class="markdownTableBodyNone">THE_1080_P  </td><td class="markdownTableBodyNone">THE_4_K, THE_12_MP, THE_1080_P   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"color_out"  </td><td class="markdownTableBodyNone">If needs to output color image in the "color_out" channel  </td><td class="markdownTableBodyNone">False  </td><td class="markdownTableBodyNone">True/False   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"color_size"  </td><td class="markdownTableBodyNone">Size of the output color image  </td><td class="markdownTableBodyNone">[1280,720]  </td><td class="markdownTableBodyNone">[w,h]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"depth"  </td><td class="markdownTableBodyNone">If needs to get depth map data  </td><td class="markdownTableBodyNone">False  </td><td class="markdownTableBodyNone">True/False   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"depth_close"  </td><td class="markdownTableBodyNone">If needs to use settings to achieve depth of nearby objects  </td><td class="markdownTableBodyNone">False  </td><td class="markdownTableBodyNone">True/False   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"depth_far"  </td><td class="markdownTableBodyNone">If needs to use settings to achieve depth of distant objects  </td><td class="markdownTableBodyNone">False  </td><td class="markdownTableBodyNone">True/False   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"depth_filtering"  </td><td class="markdownTableBodyNone">If needs to filter the depth data  </td><td class="markdownTableBodyNone">""  </td><td class="markdownTableBodyNone">"", "bilateral","median"   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"depth_point_mode"  </td><td class="markdownTableBodyNone">Mode for getting depth for a point  </td><td class="markdownTableBodyNone">"median"  </td><td class="markdownTableBodyNone">"", "median", "median", "min", "max",   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"depth_roi_size"  </td><td class="markdownTableBodyNone">Square side size of ROI for getting point depth data  </td><td class="markdownTableBodyNone">50  </td><td class="markdownTableBodyNone">Any integer   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"depth_host"  </td><td class="markdownTableBodyNone">If the depth of a ROI/Point must be computed on host (True) or device (False)  </td><td class="markdownTableBodyNone">True  </td><td class="markdownTableBodyNone">True/False   </td></tr>
</table>
<p>The context of the OAK_Stage have the following data:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Key  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"output_queues"  </td><td class="markdownTableBodyNone">Output queues dict   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"input_queues"  </td><td class="markdownTableBodyNone">Input queues dict   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"depth_data"  </td><td class="markdownTableBodyNone">Depth image (None if not used)   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"color_data"  </td><td class="markdownTableBodyNone">Highest used size color data   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"color_intrinsic"  </td><td class="markdownTableBodyNone">Color camera intrinsic calibration matrix   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">"color_calib_size"  </td><td class="markdownTableBodyNone">Color camera calibration size   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">"oak_stage"  </td><td class="markdownTableBodyNone">The oak_stage itself   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md10"></a>
Other OAK_Stage methods</h1>
<p>The OAK_Stage also have some other useful methods:</p>
<h2><a class="anchor" id="autotoc_md11"></a>
"get3DPosition(point_x, point_y, size)"</h2>
<p>Computes the 3D position in meters of a point in the image. It receives the x and y positions of the point in the image, with also the size of the image where they are, [h,w]. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
