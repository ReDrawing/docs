<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>redrawing: Stages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">redrawing
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Python package provinding tools for artistic interactive applications using AI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__c_1__users_eltsu__documents__git_hub__re_drawing_docs__documenta_xC3_xA7_xC3_xA3o_redrawing__stages.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Stages </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Stages are the basic processing units of the redrawing package. They receive data objects from input channels, processes them in the "process" method and output data in the output channels.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Creating a Stage</h1>
<p>To create a stage, one should inherit the Stage base class. The super constructor must be called to properly configure the data channels.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
process()</h2>
<p>All the stage cyclical operations should be in this method. A typicall flow consists of getting the data in the input channels, process and send the output data to the output channels.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Configurations</h2>
<p>The stages can have configurations that can be changed in it initialization, or using the <code>change_config</code> method. Each configuration must have a name.</p>
<p>To set the default configurations for a stage, you must create a <code>configs_default</code> class dict attribute with the default values.</p>
<p>On the initialization, it is possible to pass a changed configuration dict, with the values that must diverge from the default. Passing it to the super constructor allows to automatically change the object <code>_configs</code> attribute.</p>
<p>If the <code>_config_lock</code> attribute is setted to <code>True</code>, all the configuration changes will be ignored. The default <code>setup()</code> automatically sets it to <code>True</code>.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
Data channels</h2>
<h3><a class="anchor" id="autotoc_md22"></a>
Creation</h3>
<p>To create a data channel, preferably in the constructor method, the <code>addInput</code> or <code>addOutput</code> method must be used. It receives the name of the channel and the data type. It's important to note that to create connections between channels, both channels must be created before connection time. The connection can be created when generating the pipeline, as described in (page not created yet).</p>
<h3><a class="anchor" id="autotoc_md23"></a>
Getting and sending messages</h3>
<p>To get a message from a data channel, the method <code>_getInput("name_of_channel")</code> must be used. To send, use the method <code>_setOutput(outData, "name_of_channel")</code></p>
<h2><a class="anchor" id="autotoc_md24"></a>
Example</h2>
<div class="fragment"><div class="line">class MyStage(Stage):</div>
<div class="line">    configs_default = {&quot;config_name&quot;: default_value}</div>
<div class="line">    </div>
<div class="line">    def __init(self, configs={}):</div>
<div class="line">        super().__init(configs)</div>
<div class="line">        self.addInput(&quot;input&quot;, DataClass)</div>
<div class="line">        self.addOutput(&quot;output&quot;, DataClass)</div>
<div class="line">        </div>
<div class="line">    def setup(self):</div>
<div class="line">        #Do something</div>
<div class="line">        </div>
<div class="line">        self._config_lock =  True</div>
<div class="line">        </div>
<div class="line">    def process(self, context):</div>
<div class="line">        inData = self._getInput(&quot;input&quot;)</div>
<div class="line">        </div>
<div class="line">        #Do something</div>
<div class="line">        </div>
<div class="line">        self._setOutput(outData, &quot;output&quot;)</div>
</div><!-- fragment --><p><br  />
<br  />
 </p>
<h1><a class="anchor" id="autotoc_md25"></a>
Substages and context</h1>
<p>Substages are stages that can change the behavior of it superstages, or needs to use some data from the superstage that can't be pickable (serializable) or needs to be used at the right run time.</p>
<p>They are defined at the exact same way of the other stages, but are associated with the superstage at the pipeline creation time. They can also use the <code>context</code> parameter of the <code>process(context)</code> method, a dictionary with shared data of the superstage. The content of the context data are described in each superstage class documentation.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
setup()</h2>
<p>The setup method of a substage is called before the superstage setup().</p>
<h2><a class="anchor" id="autotoc_md27"></a>
process(context)</h2>
<p>The process method of a substage can be called before or after the superstage process(). The moment can be choosed when creating the substage-stage relation in the pipeline. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
